{% extends 'base-derk.html' %}

{% block body_block %}
  {% if validlink %}
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card shadow-lg border-0 rounded">
          <div class="card-header text-center bg-primary text-white">
            <h4 class="mb-0">Change Password</h4>
          </div>
          <div class="card-body p-4">
            <p class="text-muted text-center mb-4">Enter your new password below:</p>
            <form method="post" class="d-flex flex-column align-items-center">
              {% csrf_token %}
              <div class="mb-0 col-md-7">
                {{ form.as_p }}
              </div>
              <div class="d-grid col-md-7">
                <button type="submit" class="btn btn-primary">Change Password</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% else %}
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card shadow-lg border-0 rounded">
          <div class="card-header text-center bg-primary text-white">
            <h4 class="mb-0">Invalid Password Link</h4>
          </div>
          <div class="card-body p-4">
            <p class="text-muted text-center mb-4">The password reset link was invalid, possibly because it has already been used.
              Please request a new password reset.</p>
          </div>
          <div class="card-footer text-center">
            <small class="text-muted">Need new password link?</small><br>
            <a href="{% url 'friends:password_reset' %}" class="text-primary">Back to Password Reset</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
{% endblock %}
