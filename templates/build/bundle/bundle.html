{% extends 'base-derk.html' %}
{% load static %}

{% block title_block %} Bundle {% endblock %}

{% block main_header_block %}
<br>
<div class="row">
   <div>
      <!-- Change to Other One if Preferred -->
      <!-- Bundle View: <p>{{ bundle.name }}</p> -->
      Bundle View: {{ bundle.name }}
   </div>
   <hr>
</div>
{% endblock %}

{% block about_header_block %}
<div class="row center">
   <br>
   
   <!-- Help Button -->
   <div class="col-md-2">
      <button class="btn btn-teal" data-toggle="bundle-collapse" href="#content" role="button"> What is a bundle? </button>
   </div>
   
   <!-- Delete Button -->
   <!-- See if we can make this into a pop-up modal instead of having a separate delete pages -->
   <div class="col-md-3">
      <a href="{% url 'build:bundle_delete' bundle.pk %}">
         <button role="button" class="btn btn-red"> Delete {{ bundle }} Bundle </button>
      </a>
   </div>
   
   
   <!-- View XML Files Button -->
   <div class="col-md-3">
      <a href="{% url 'build:directory_view' bundle.relative_dir %}">
         <button role="button" class="btn btn-blue"> View {{ bundle }} Directory </button>
      </a>
   </div>
   
   <!-- Download Button -->
   <div class="col-md-4">
      <a href="{% url 'build:bundle_download' bundle.pk %}   ">
         <button role="button" width="500 px" class="btn btn-cyan" data-toggle="tiptool" data-placement="right"
         title="Click this button to download a zip file of the current bundle template package as it currently is. The resulting package will contain all label templates you've included in your bundle and may or may not be complete depending on how much tailoring you've done throughout the system.">
         Download {{ bundle }} Bundle Template Package 
      </button>
   </a>
</div>

   <!-- IDK where this section is in the bundle page never seen it before -->
   <div id="content" class="bundle-collapse">
      <div class="col align self end">
         <div class="card card-body">
            <strong>Bundles:</strong>
            <br>
            A bundle is the default logical construct for archiving digital data in the PDS. Bundles have a simple
            hierarchical structure. A bundle has one or more member collections, each of which has one or more member
            basic products. PDS does not impose requirements on how bundles are defined except that (1) bundles must be
            distinct with unique identifiers within the overall holdings of PDS, and (2) each bundle must be approved by
            a PDS peer review.
            <br>
            <strong>Archive structure:</strong>
            <br>
            Members of a bundle are listed in a Product_Bundle, an XML file which serves as a label and collection
            listing. Product_Bundle is described and uniquely identified using the Product_Bundle class definition.
            <br>
         </div>
      </div>
   </div>

   <br>
</div>
{% endblock %}

<!-- New Body Block -->
{% block body_block %}

<!-- Stylings -->
<style>
   /* Split the screen in half */
   .split {
      height: 100%;
      width: 50%;
      position: fixed;
      z-index: 1;
      top: 0;
      overflow-x: hidden;
      padding-top: 6em;
   }

   .btn-light.active {
      background-color: rgb(40, 170, 158);
      border-color: rgb(40, 170, 158);
   }

   .bundle-collapse {
      overflow: hidden;
      transition: 0 1s ease;
   }

   a:hover{
      cursor: pointer;
   }

   a:hover .modal-card {
      transform: scale(1.025);
      transition: transform 0.3s ease;
   }

   /* Tabs Styling */
   .bundle-nav-tabs .bundle-nav-item.show .bundle-nav-link .bundle-nav-link.active {
      background-color: transparent;
      border-color: transparent transparent white;
      border-bottom: 2px solid;
   }

   .bundle-nav-tabs .bundle-nav-link {
      border: 1px solid transparent;
      border-top-left-radius: .25rem;
      border-top-right-radius: .25rem;
   }

   .bundle-nav-link {
      text-decoration: none;
      color: black;
   }

   /* Required Form Fields */
   label.required::after {
      content: ' *';
      color: red;
   }
</style>

<div class="container-fluid">
   <!-- Fill Out Forms Side -->
   <div class="split left" style="left: 0;">
      <!-- Info Card -->
      <div class="row p-1 m-3 mt-0">
         <div class="card d-flex">
            <h3 class="card-title text-center mt-3">{{ bundle.name }}</h3>
            <p class="card-body text-left z-depth-2">
               <!-- LID -->
               <strong>LID:</strong> {{ bundle.lid }}
               <br>
      
               <!-- Status -->
               <strong>Status:</strong>
               {% if bundle.status == 'b' %} Build <br>
               {% elif bundle.status == 'r' %} Review <br>
               {% else %} Submit <br>
               {% endif %}
      
               <!-- Creator -->
               <strong>Creator:</strong> {{bundle.user}}<br>
               
               <br>
               Below are several sections that ELSA needs you to fill out to make your templates as complete as possible.
               Several sections are used universally throughout your bundle (e.g., Investigation Area and Context). The
               Collections section will allow you to add, view, and edit collections that you would like to include in your
               bundle.
            </p>
         </div>
      </div>

      <!-- Buttons -->
      <div class="row p-1 m-3 mt-0">
         <div class="btn-group" role="group">
            <button type="button" class="btn btn-light text-light" data-bs-toggle="collapse" data-bs-target="#context" aria-expanded="true" style="box-shadow: none;">Context</button>
            <button type="button" class="btn btn-light text-light" data-bs-toggle="collapse" data-bs-target="#investigation" aria-expanded="true" style="box-shadow: none;">Investigation Area</button>
            <button type="button" class="btn btn-light text-light" data-bs-toggle="collapse" data-bs-target="#collections" aria-expanded="true" style="box-shadow: none;">Collections</button>
         </div>
      </div>

      <!-- Context -->
      <div id="context" class="bundle-collapse">
         <div class="row p-1 m-3 mt-1">
            <a data-bs-toggle="modal" data-bs-target="#context_modal">
               <div class="card modal-card">
                  <h5 class="card-title black-text mt-3 text-center"><strong>CONTEXT</strong></h5>
                  <hr>
                  <div class="card-body black-text pt-1 text-left">
                     <p>
                        Look at the sunset, life is amazing, life is beautiful, life is what you make it. 
                        Mogul talk. Don’t ever play yourself. To be successful you’ve got to work hard, to make history, simple, you’ve got to make it. The key is to enjoy life, because they don’t want you to enjoy life. I promise you, they don’t want you to jetski, they don’t want you to smile. In life there will be road blocks but we will over come it. 
                        The key to more success is to get a massage once a week, very important, major key, cloth talk. 
                        Give thanks to the most high.
                     </p>
                  </div>
               </div>
            </a>
         </div>
      </div>

      <!-- Investigation Area -->
      <div id="investigation" class="bundle-collapse">
         <div class="row p-1 m-3 mt-1">
            <a data-bs-toggle="modal" data-bs-target="#invest_area_modal">
               <div class="card modal-card">
                  <h5 class="card-title black-text mt-3 text-center"><strong>INVESTIGATION AREA</strong></h5>
                  <hr>
                  <div class="card-body black-text pt-1 text-left">
                     <p>
                        You do know, you do know that they don’t want you to have lunch. I’m keeping it real with you, so what you going do is have lunch. 
                        We don’t see them, we will never see them. A major key, never panic. Don’t panic, when it gets crazy and rough, don’t panic, stay calm. 
                        I’m giving you cloth talk, cloth. Special cloth alert, cut from a special cloth. How’s business? Boomin. 
                        You see the hedges, how I got it shaped up? It’s important to shape up your hedges, it’s like getting a haircut, stay fresh. 
                        You do know, you do know that they don’t want you to have lunch. I’m keeping it real with you, so what you going do is have lunch.
                     </p>
                  </div>
               </div>
            </a>
         </div>
      </div>
      
      <!-- Collections -->
      <div id="collections" class="bundle-collapse">
         <div class="row p-1 m-3 mt-1">
            <a data-bs-toggle="modal" data-bs-target="#collections_modal">
               <div class="card modal-card">
                  <h5 class="card-title black-text mt-3 text-center"><strong>COLLECTIONS</strong></h5>
                  <hr>
                  <div class="card-body black-text pt-1 text-left">
                     <p>
                        Watch your back, but more importantly when you get out the shower, dry your back, it’s a cold world out there. 
                        You should never complain, complaining is a weak emotion, you got life, we breathing, we blessed. Bless up. 
                        They will try to close the door on you, just open it. The key is to enjoy life, because they don’t want you to enjoy life. 
                        I promise you, they don’t want you to jetski, they don’t want you to smile. Surround yourself with angels. Mogul talk.
                     </p>
                  </div>
               </div>
            </a>
         </div>
      </div>

      <!-- Possibly Add delete, download, etc. here at the bottom -->

      <!-- Collapse Functionality -->
      <script>
         $(document).ready(function() {
            $('.collapse').on('show.bs.collapse', function() {
               $('.collapse.show').collapse('hide');
            });
         });
      </script>

      {% block toast_block %}
      {% if messages %}
         <div class="toast position-fixed bottom-0" role="alert" aria-live="assertive" aria-atomic="true" data-delay="5000">
            <div class="toast-header">
                  <strong class="mr-auto">Notification</strong>
                  <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                     <span aria-hidden="true">&times;</span>
                  </button>
            </div>
            <div class="toast-body">
                  {% for message in messages %}
                     {{ message }}
                  {% endfor %}
            </div>
         </div>
      {% endif %}
      {% endblock %}
   </div>

   <!-- View XML Side -->
   <div class="split right text-center text-light" style="right: 0;">
      <div class="row p-1 m-3 mt-0">
         <div class="btn-group" role="group">
            <button type="button" class="btn btn-light text-light" data-bs-toggle="collapse" data-bs-target="#bundle_xml" aria-expanded="true" style="box-shadow: none;">Bundle</button>
            <button type="button" class="btn btn-light text-light" data-bs-toggle="collapse" data-bs-target="#context_xml" aria-expanded="true" style="box-shadow: none;">Context</button>
            <button type="button" class="btn btn-light text-light" data-bs-toggle="collapse" data-bs-target="#document_xml" aria-expanded="true" style="box-shadow: none;">Document</button>
            <button type="button" class="btn btn-light text-light" data-bs-toggle="collapse" data-bs-target="#xml_schema" aria-expanded="true" style="box-shadow: none;">XML Schema</button>
         </div>
      </div>
      <style>
         .xml-container {
            color:black;
            white-space: pre;
            font-family: monospace;
            text-align: left;
         }
      </style>
      <div id="bundle_xml" class="bundle-collapse">
         <div class="row p-1 m-3 mt-1">
            <a data-bs-toggle="modal" data-bs-target="#context_modal">
               <div class="card modal-card">
                  <h5 class="card-title black-text mt-3 text-center"><strong>Bundle XML</strong></h5>
                  <hr>
                  <div class="xml-container">
                     <pre><code>{{ xml_content_set.0 }}</code></pre>
                  </div>
               </div>
            </a>
         </div>
      </div>
      <div id="context_xml" class="bundle-collapse">
         <div class="row p-1 m-3 mt-1">
            <a data-bs-toggle="modal" data-bs-target="#context_modal">
               <div class="card modal-card">
                  <h5 class="card-title black-text mt-3 text-center"><strong>Context XML</strong></h5>
                  <hr>
                  <div class="xml-container">
                     <pre><code>{{ xml_content_set.1 }}</code></pre>
                  </div>
               </div>
            </a>
         </div>
      </div>
      <div id="document_xml" class="bundle-collapse">
         <div class="row p-1 m-3 mt-1">
            <a data-bs-toggle="modal" data-bs-target="#context_modal">
               <div class="card modal-card">
                  <h5 class="card-title black-text mt-3 text-center"><strong>Document XML</strong></h5>
                  <hr>
                  <div class="xml-container">
                     <pre><code>{{ xml_content_set.2 }}</code></pre>
                  </div>
               </div>
            </a>
         </div>
      </div>
      <div id="xml_schema" class="bundle-collapse">
         <div class="row p-1 m-3 mt-1">
            <a data-bs-toggle="modal" data-bs-target="#context_modal">
               <div class="card modal-card">
                  <h5 class="card-title black-text mt-3 text-center"><strong>XML Schema</strong></h5>
                  <hr>
                  <div class="xml-container">
                     <pre><code>{{ xml_content_set.3 }}</code></pre>
                  </div>
               </div>
            </a>
         </div>
      </div>
   </div>



   <!-- Form Modals -->
   <!-- Figure out how to move these to new file for readability sake - deric -->

   <!-- Context Modal -->
   <div class="modal fade" id="context_modal">
      <div class="modal-dialog modal-xl">
         <div class="modal-content">
            <!-- Title -->
            <div class="modal-header">
               <h5 class="modal-title">Context</h5>
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
               <!-- Tabs -->
               <ul class="nav nav-tabs nav-justified" role="tablist">
                  <li class="nav-item" role="presentation">
                     <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#con_inv" type="button" role="tab" aria-selected="true">Investigation</button>
                  </li>
                  <li class="nav-item" role="presentation">
                     <button class="nav-link " data-bs-toggle="tab" data-bs-target="#con_tar" type="button" role="tab" aria-selected="false">Targets</button>
                  </li>
               </ul>

               <!-- Content -->
               <div class="tab-content">
                  <!-- Investigation Tab -->
                  <div class="tab-pane fade show active" id="con_inv" role="tabpanel" >
                     <br>

                     <div class="col-md-12">
                        <div class="card">
                        <div class="card-header">
                           <p> To begin, select an investigation product below to associate with your bundle. Investigations serve as the top level of the context system and will associate your bundle with a larger project.</br> <strong>Investigations are categorized as:</strong> Individual Investigations, Missions, Field Campaigns, Observing Campaigns, or Other Investigations. Selecting an investigation will pare down the list of components to the ones that go with that investigation (i.e., associated instruments, targets, etc.) </p>
                        </div>
                        <form class="card-body black-text text-left z-depth-2" id="query01" method="post" action="{% url 'build:context_search_investigation' bundle.pk  %}">
                              {% csrf_token %}
                              {{ form_investigation }}
                              {{ form.errors }}
                              {{ form.non_field_errors }}
                    
                              <input type="submit" class="btn btn-light text-light mt-4" value="Submit"/>
                        </form> 
                        </br>
                        </div>
                     </div>

                     <br>

                     {% if investigations %}
                        {% for investigation in investigations %}
                        <div class="container mt-3">
                           <a data-bs-toggle="collapse" data-bs-target="#context_options_{{ investigation.lid }}">
                           <div class="card">
                              <div class="row no-gutters">
                                 <div class="col-md-2">
                                    <img class="img-fluid" src="{% static 'images/investigation.png' %}" alt="Investigation Image" style="max-width: 65%;">
                                 </div>
                                 <div class="col-md-8">
                                    <div class="card-body">
                                       <h5 class="card-title">{{ investigation }}</h5>
                                       <p class="card-text">{{ investigation.lid }}</p>
                                       <button type="button" class="btn btn-danger">Remove</button>

                                   <!-- <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p> -->
                                    </div>
                                 </div>
                              </div>
                           </div>
                           </a>
                        </div>
                        <div id="context_options_{{ investigation.lid }}" class="bundle-collapse">
                           {% for instrument_host in instrument_hosts %}
                              <!-- Change so it only shows instrument host relevant to this investigation -->
                              {% if instrument_host.investigations.last == investigation %}
                              <div class="col-md-6">
                                 <div class="container mt-2">
                                    <a data-bs-toggle="collapse" data-bs-target="#filler">
                                    <div class="sub-card card">
                                       <div class="row no-gutters">
                                          <div class="col-md-2">
                                             <img class="img-fluid" src="{% static 'images/host.png' %}" alt="Host Image" style="max-width: 65%;">
                                          </div>
                                          <div class="col-md-8">
                                             <div class="card-body">
                                                <h5 class="card-title">{{ instrument_host }}</h5>
                                                <p class="card-text">{{ instrument_host.lid }}</p>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                    </a>
                                 </div>
                              </div>
                              {% else %}
                              {% endif %}
                           {% empty %}
                           <div class="col-md-8 ms-5">
                              <div class="container mt-2">
                                 <a href="{% url 'build:context_search_instrument_host_and_facility' bundle.pk investigation.pk %}">
                                 <div class="sub-card card">
                                    <div class="row no-gutters">
                                       <div class="col-md-2">
                                          <img class="img-fluid" src="{% static 'images/null.png' %}" alt="Null" style="max-width: 65%;">
                                       </div>
                                       <div class="col-md-8">
                                          <div class="card-body">
                                             <h5 class="card-title">No Instrument Hosts</h5>
                                             <p class="card-text">Add a Instrument Host</p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                                 </a>
                              </div>
                           </div>
                           {% endfor %}
                        </div>
                        {% endfor %}
                     {% else %}
                     {% endif %}
                  </div>
                  <!-- Other Products -->
                  <div class="tab-pane fade" id="con_tar" role="tabpanel">
                     <br>

                     <div class="col-md-12">
                        <div class="card">
                        <div class="card-header">
                           <p>Choose the target(s) you wish to add to your bundle. This is a complete list of availabe targets, independent of any investigations chosen.</p>
                        </div>
                        <form class="card-header black-text text-left z-depth-2"id="query01" method="post" action="{% url 'build:context_search_target' bundle.pk %}">
                           
                                {% csrf_token %}
                                {{ form_target }}
                                {{ form.errors }}
                                {{ form.non_field_errors }}
                                
                                <input type="submit" class="btn btn-light text-light" value="Submit"/>
                                
                            </form>  
                        </br>
                        </div>
                     </div>

                     <br>

                     {% if targets %}
                        {% for target in targets %}
                        <div class="container mt-3">
                           <div class="card">
                              <div class="row no-gutters">
                                 <div class="col-md-2">
                                    <img class="img-fluid" src="{% static 'images/target.png' %}" alt="Target Image" style="max-width: 65%;">
                                 </div>
                                 <div class="col-md-8">
                                    <div class="card-body">
                                       <h5 class="card-title">{{ target }}</h5>
                                       <p class="card-text">{{ target.lid }}</p>
                                       <button type="button" class="btn btn-danger">Remove</button>

                                   <!-- <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p> -->
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        {% endfor %}
                     {% else %}
                     <div class="container mt-2">
                        <div class="sub-card card">
                           <div class="row no-gutters">
                              <div class="col-md-2">
                                 <img class="img-fluid" src="{% static 'images/null.png' %}" alt="Null" style="max-width: 65%;">
                              </div>
                              <div class="col-md-8">
                                 <div class="card-body">
                                    <h4 class="card-title">No Targets</h5>
                                    <!-- <p class="card-text">Add a Instrument Host</p> -->
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                     {% endif %}
                  </div>   
               </div>
            </div>
         </div>
      </div>
   </div>

   <!-- Investigation Area Modal -->
   <div class="modal fade" id="invest_area_modal">
      <div class="modal-dialog modal-xl">
         <div class="modal-content">
            <!-- Title -->
            <div class="modal-header">
               <h5 class="modal-title">Investigation Area</h5>
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body pt-0">
               <!-- Tabs -->
               <ul class="nav nav-tabs nav-justified" role="tablist">
                  <li class="bundle-nav-item nav-item" role="presentation">
                     <button class="bundle-nav-link nav-link" data-bs-toggle="tab" data-bs-target="#inv_alias" type="button" role="tab" aria-selected="true">Alias</button>
                  </li>
                  <li class="bundle-nav-item nav-item" role="presentation">
                     <button class="bundle-nav-link nav-link" data-bs-toggle="tab" data-bs-target="#inv_mod" type="button" role="tab" aria-selected="false">Modification History</button>
                  </li>
                  <li class="bundle-nav-item nav-item" role="presentation">
                     <button class="bundle-nav-link nav-link active" data-bs-toggle="tab" data-bs-target="#inv_cite" type="button" role="tab" aria-selected="false">Citation Information</button>
                  </li>
               </ul>

               <!-- Content -->
               <div class="tab-content">
                  <!-- Alias -->
                  <div class="tab-pane fade" id="inv_alias" role="tabpanel">
                     <!-- Form -->
                     <div class="row px-2">
                        <form action="{% url 'build:bundle' bundle.pk %}" method="post" id="form_alias" >
                           {% csrf_token %}
   
                           <!-- Alternate ID -->
                           <div class="mt-3">
                              <label for="alt_id" class="required">Alternate ID</label>
                              {{ form_alias.alternate_id }}
                           </div>
   
                           <!-- Alternate Title -->
                           <div class="mt-3">
                              <label for="alt_title" class="required">Alternate Title</label>
                              {{ form_alias.alternate_title }}
                           </div>
   
                           <!-- Comment -->
                           <div class="mt-3">
                              <label for="comment">Comment</label>
                              {{ form_alias.comment }}
                           </div>
                           
                           <!-- Create Alias -->
                           <button type="submit" class="btn btn-light text-light my-4">Create Alias</button>
                        </form>
                     </div>

                     <!-- List of Aliases -->
                     <div class="modal-footer justify-content-start">
                        <!-- No Aliases Exist -->
                        {% if alias_set_count == 0 %}
                           <p>No Aliases Found</p>
                        
                        <!-- Display Aliases -->
                        {% else %}
                           {% for alias in alias_set %}
                           <a href="{% url 'build:alias_edit' bundle.pk alias.pk %}" style="text-decoration: none;" data-toggle="tiptool" data-placement="right" title="Click me to edit this Alias Form">
                           </a>

                           <div class="card snippet-card ms-0 me-3">
                              <div class="card-body">
                                 <h5 class="card-title">{{ alias.alternate_title }}</h5>
                                 <h6 class="card-subtitle text-muted mb-2">Alternate ID: {{ alias.alternate_id }}</h6>
                                 <p class="card-text">{{ alias.comment }}</p>
                                 <a href="{% url 'build:alias_edit' bundle.pk alias.pk %}" class="btn btn-light text-light d-flex justify-content-center">Edit</a>
                              </div>
                           </div>
                           {% endfor %}
                        {% endif %}
                     </div>
                  </div>

                  <!-- Modification History -->
                  <div class="tab-pane fade" id="inv_mod" role="tabpanel">
                     <div class="row px-2">
                        <form action="{% url 'build:bundle' bundle.pk %}" method="post" id="form_modification_history">
                           {% csrf_token %}
   
                           <!-- Description-->
                           <div class="mt-3">
                              <label for="mod_desc" class="required">Description</label>
                              {{ form_modification_history.description }}
                           </div>
   
                           <!-- Modification Date -->
                           <div class="mt-3">
                              <label for="mod_date" class="required">Modificaiton Date</label>
                              {{ form_modification_history.modification_date }}
                           </div>
   
                           <!-- Version ID -->
                           <div class="mt-3">
                              <label for="version_id">Version ID</label>
                              {{ form_modification_history.version_id }}
                           </div>
                           
                           <!-- Create Modification History -->
                           <button type="submit" class="btn btn-light text-light my-4">Create Modification History</button>
                        </form>
                     </div>

                     <!-- List of Modification History Snippets -->
                     <div class="modal-footer justify-content-start">
                        <!-- No Modificaiton History Snippets Exist -->
                        {% if modification_history_set_count == 0 %}
                           <p>No Modification History Found</p>
                        
                        <!-- Display Modification History Snippets -->
                        {% else %}
                        <!-- grab from old bundle.html -->
                        {% endif %}
                     </div>
                  </div>

                  <!-- Citation Information -->
                  <div class="tab-pane fade show active" id="inv_cite" role="tabpanel">
                     <!-- Form -->
                     <div class="row px-2">
                        <form action="{% url 'build:bundle' bundle.pk %}" method="post" id="form_citation_information">
                           {% csrf_token %}
   
                           <!-- Author List -->
                           <div class="mt-3">
                              <label for="author_list">Author List</label>
                              {{ form_citation_information.author_list }}
                           </div>
   
                           <!-- Editor List -->
                           <div class="mt-3">
                              <label for="editor_list">Editor List</label>
                              {{ form_citation_information.editor_list }}
                           </div>
   
                           <!-- Keyword -->
                           <div class="mt-3">
                              <label for="keyword">Keyword</label>
                              {{ form_citation_information.keyword }}
                           </div>
   
                           <!-- Publication Year -->
                           <div class="mt-3">
                              <label for="publication_year" class="required">Publication Year</label>
                              {{ form_citation_information.publication_year }}
                           </div>
   
                           <!-- Description -->
                           <div class="mt-3">
                              <label for="mod_desc" class="required">Description</label>
                              {{ form_citation_information.description }}
                           </div>
   
                           <!-- Create Citation Information -->
                           <button type="submit" class="btn btn-light text-light my-4">Create Citaiton Information</button>
                        </form>
                     </div>
   
                     <!-- List of Citation Information Snippets -->
                     <div class="modal-footer justify-content-start">
                        <!-- No Citation Information Snippets Exist -->
                        {% if citation_information_set_count == 0 %}
                           <p>No Citation Information Found</p>
                        
                        <!-- Display Citation Information Snippets -->
                        {% else %}
                        <!-- grab from old bundle.html -->
                        {% endif %}
                     </div>
                  </div>
               </div>

            </div>
         </div>
      </div>
   </div>

   <!-- Collections Modal -->
</div>
{% endblock %}
